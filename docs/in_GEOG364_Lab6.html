<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Lab 6: LISA and Regression</title>

<script src="site_libs/header-attrs-2.29/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.13.2/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/kePrint-0.0.1/kePrint.js"></script>
<link href="site_libs/lightable-0.0.1/lightable.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>



<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<link rel="stylesheet" href="projectlab.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html"></a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="in_GEOG364_FAQ.html">FAQs</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    YOUR LABS
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="in_GEOG364_Lab1.html">Lab 1: Basics</a>
    </li>
    <li>
      <a href="in_GEOG364_Lab2.html">Lab 2: Data summary</a>
    </li>
    <li>
      <a href="in_GEOG364_Lab3.html">Lab 3: Taiwan House</a>
    </li>
    <li>
      <a href="in_GEOG364_Lab4.html">Lab 4: Spatial Wrangling</a>
    </li>
    <li>
      <a href="in_GEOG364_Lab5.html">Lab 5: Moran's I</a>
    </li>
    <li>
      <a href="in_GEOG364_Lab6.html">Lab 6: LISA and regression</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Advanced Tutorials
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="Tutorial_CensusData.html">Getting Census Data</a>
    </li>
    <li>
      <a href="Tutorial_SpatWeights.html">Spatial Weights Matrices</a>
    </li>
    <li>
      <a href="Tutorial_Moran.html">Moran's I</a>
    </li>
    <li>
      <a href="Tutorial_LISA.html">LISA</a>
    </li>
    <li>
      <a href="Tutorial_Regression.html">Regression</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    TURTLES
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="Turtle_tutorial.html">Tutorial</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Lab 6: LISA and Regression</h1>

</div>


<hr />
<p><br />
</p>
<div id="welcome-to-lab-6" class="section level1">
<h1>Welcome to Lab 6!</h1>
<p><strong>Aim of the lab</strong></p>
<p>In this guide you will learn how to:</p>
<ul>
<li>Run LISA analyses</li>
<li>Run a regression analysis and look at spatial residuals</li>
</ul>
<p class="comment">
<div id="boxgreen">
<p><strong>This is a TWO WEEK LAB</strong> See <a
href="https://psu.instructure.com/courses/2396422/assignments/17585714">here</a>
for assignment guidelines. You must submit an <code>.Rmd</code> file and
its associated <code>.html</code> file.</p>
</div>
<p><br />
</p>
<div id="boxedtext">
<p><br />
<strong>Getting help</strong><br />
- Kiely (and often Dr G) will be present during your lab sessions. This
is the easiest way to get help.<br />
- Dr G has weekly office hours and genuinely enjoys helping with R, even
if you feel stuck or overwhelmed.<br />
- You may send a Canvas message to Kiely or Dr G (or if you are
completely lost).<br />
</p>
<p><br />
</p>
</div>
<p><br />
</p>
<hr />
<p><br />
</p>
</div>
<div id="set-up.-dont-skip" class="section level1">
<h1>Set-up. DON’T SKIP!</h1>
<p><br />
</p>
<div id="create-a-project-get-the-data" class="section level3">
<h3>Create a project &amp; get the data</h3>
<p>There are two options here depending on whether you are using
R-studio on the website (posit cloud) or your own computer (R-Desktop).
If you are using a lab computer choose the R-Desktop route.</p>
<div id="option-1.-posit-cloud-website-users" class="section level4">
<h4>Option 1. Posit Cloud Website Users</h4>
<details>
<summary>
Task 1. Create a project for Lab 6 (expand for instructions)
</summary>
<div class="collapsible-content">
<iframe src="https://psu-spatial.github.io/Stat462-2025/T5_ProjectsPositCloud.html" style="width: 100%; height: 700px; border: none;">
</iframe>
</div>
<p><br></p>
</details>
<div class="small-gap">

</div>
<details>
<summary>
Task 2. Install more packages (expand for instructions)
</summary>
<p><br></p>
<p>Unfortunately on the website you need to install your packages each
time.<br>Go to to the packages tab, click install to get to the
app-store and download/install these packages:</p>
<ul>
<li><code>readxl</code></li>
<li><code>viridis</code></li>
<li><code>ggstatsplot</code></li>
<li><code>terra</code></li>
<li><code>tigris</code></li>
<li><code>tidyverse</code></li>
<li><code>dplyr</code></li>
<li><code>tmap</code></li>
<li><code>elevatr</code></li>
<li><code>osmdata</code></li>
<li><code>ggplot2</code></li>
<li><code>ggthemes</code></li>
<li><code>RColorBrewer</code></li>
<li><code>plotly</code></li>
<li><code>cols4all</code></li>
<li><code>shinyjs</code></li>
</ul>
<p>We will also need a package called sf, which runs a lot of the
spatial commands in R. Unfortunately, posit cloud sometimes has a few
technical issues with sf, so you will need to run a special command.</p>
<p>IN THE CONSOLE, run these two commands.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;remotes&quot;</span>)</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="at">repo =</span> <span class="st">&quot;r-spatial/sf&quot;</span>, <span class="at">ref =</span> <span class="st">&quot;93a25fd8e2f5c6af7c080f92141cb2b765a04a84&quot;</span>)</span></code></pre></div>
<p>T6_Packages.html <br><em>Reminder: <a
href="https://psu-spatial.github.io/Stat462-2025/T6_Packages.html">Tutorial:
Packages cheatsheet</a></em>.</p>
</details>
</div>
<div id="option-2.-r-desktop-users" class="section level4">
<h4>Option 2. R-Desktop Users</h4>
<details>
<summary>
Task 1. Create a project for Lab 6
</summary>
<p><br></p>
<div class="collapsible-content">
<iframe src="https://psu-spatial.github.io/Stat462-2025/T5_ProjectsRDesktop.html" style="width: 100%; height: 700px; border: none;">
</iframe>
</div>
</details>
<div class="small-gap">

</div>
<p><br></p>
</div>
</div>
<div id="set-up-your-lab-6-report" class="section level3">
<h3>Set-up your Lab 6 report</h3>
<p>You are welcome to use/edit the template you made in previous labs.
If you are unsure what I mean by that, follow these instructions.</p>
<details>
<summary>
Task. Create your RMarkdown file - expand &amp; look at Tutorial 4B and
4C
</summary>
<p><br></p>
<div class="collapsible-content">
<iframe src="https://hgreatrex.github.io/Geog364_2024/pg_Tut4_markdown.html#Tutorial_4B:_Creating_a_markdown_document" style="width: 100%; height: 700px; border: none;">
</iframe>
</div>
</details>
<div class="small-gap">

</div>
<details>
<summary>
Task. Edit your YAML code &amp; ADD A NEW THEME
</summary>
<p><br></p>
<p>Lets use similar options to Lab 4. Remember YAML code is annoying to
edit, because here, <em>spaces really do matter</em>. Everything has to
be perfect or it won’t knit.</p>
<ul>
<li><p><strong>Select everything in my code chunk here and replace your
YAML with this (remember the — on line 1 and at the
end).</strong></p></li>
<li><p>Now edit the author name to your own. If you wonder what
Sys.Date() is, don’t touch it - it automatically gives you the current
date.</p></li>
<li><p>Now change your theme to your favourite one of these - you can
see what it looks like by pressing knit. Note, DO NOT put quote marks
around the theme name.</p>
<ul>
<li>bootstrap</li>
<li>cerulean</li>
<li>cosmo</li>
<li>darkly</li>
<li>flatly</li>
<li>journal</li>
<li>lumen</li>
<li>paper</li>
<li>readable</li>
<li>sandstone</li>
<li>simplex</li>
<li>spacelab</li>
<li>united</li>
<li>yeti</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="co">#---------------------------------------------------------</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="co"># </span><span class="al">NOTE</span><span class="co">, Your theme does NOT have quote marks around it </span></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a><span class="co">#---------------------------------------------------------</span></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a><span class="sc">---</span></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a>title<span class="sc">:</span> <span class="st">&quot;GEOG-364 - Lab 6&quot;</span></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a>author<span class="sc">:</span> <span class="st">&quot;hlg5155&quot;</span></span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a>date<span class="sc">:</span> <span class="st">&quot;`r Sys.Date()`&quot;</span></span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a>output<span class="sc">:</span></span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a>  html_document<span class="sc">:</span></span>
<span id="cb2-10"><a href="#cb2-10" tabindex="-1"></a>    toc<span class="sc">:</span> true</span>
<span id="cb2-11"><a href="#cb2-11" tabindex="-1"></a>    toc_float<span class="sc">:</span> yes</span>
<span id="cb2-12"><a href="#cb2-12" tabindex="-1"></a>    number_sections<span class="sc">:</span> yes</span>
<span id="cb2-13"><a href="#cb2-13" tabindex="-1"></a>    theme<span class="sc">:</span> lumen</span>
<span id="cb2-14"><a href="#cb2-14" tabindex="-1"></a>    df_print<span class="sc">:</span> paged</span>
<span id="cb2-15"><a href="#cb2-15" tabindex="-1"></a><span class="sc">---</span></span></code></pre></div>
</details>
<div class="small-gap">

</div>
<details>
<summary>
Task. Delete the existing text and create/run your library code chunk
</summary>
<p><br></p>
<ul>
<li><p>Click on your lab script (the Rmd file) and delete all the
‘welcome text’ after line 11.<br>Press enter a few times and make a new
level-1 heading called <code>Set Up</code>.<br></p></li>
<li><p>We should have all the packages we need installed, but we need to
open them. Make a new code chunk containing this code.<br></p></li>
</ul>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a><span class="fu">library</span>(terra)</span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a><span class="fu">library</span>(tmap)</span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a><span class="fu">library</span>(elevatr)</span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a><span class="fu">library</span>(osmdata)</span>
<span id="cb3-9"><a href="#cb3-9" tabindex="-1"></a><span class="fu">library</span>(ggstatsplot)</span>
<span id="cb3-10"><a href="#cb3-10" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb3-11"><a href="#cb3-11" tabindex="-1"></a><span class="fu">library</span>(ggthemes)</span>
<span id="cb3-12"><a href="#cb3-12" tabindex="-1"></a><span class="fu">library</span>(viridis)</span>
<span id="cb3-13"><a href="#cb3-13" tabindex="-1"></a><span class="fu">library</span>(RColorBrewer)</span>
<span id="cb3-14"><a href="#cb3-14" tabindex="-1"></a><span class="fu">library</span>(plotly)</span>
<span id="cb3-15"><a href="#cb3-15" tabindex="-1"></a><span class="fu">library</span>(units)</span></code></pre></div>
<p><br></p>
<ul>
<li><p>Press the green arrow on the right of the code chunk to run the
code inside it. You will see a load of “loading text” telling your
details about the packages you just loaded.<br><br> Press the green
arrow AGAIN. The text should disappear unless there is an
error.<br></p></li>
<li><p>Note, remember to run this code chunk EVERY TIME your start
R-Studio (in the same way you need to click on an app on your phone
before you can use it). <br></p></li>
</ul>
<p>You might need additional libraries as you work through the lab. If
so, add them in this code chunk AND REMEMBER TO RERUN. If you see a
little yellow bar at the top asking you to install them,click yes!</p>
<p><br></p>
</details>
<div class="small-gap">

</div>
<details>
<summary>
Task. Add warning=FALSE and message=FALSE to your library code chunk.
</summary>
<p><br><br><br></p>
<div class="collapsible-content">
<iframe src="https://psu-spatial.github.io/Stat462-2025/T7_Markdown_4bCodeChunkOptions.html" style="width: 100%; height: 700px; border: none;">
</iframe>
</div>
</details>
<div class="small-gap">

</div>
</div>
<div id="check-your-progress" class="section level3">
<h3>Check your progress</h3>
<p>Your lab script should now look similar this, but with your theme and
YAML options of choice (you might have a few different libraries than in
my screenshot). You should also be able to knit it successfully. If not,
go back and do the previous sections!</p>
<p><br></p>
<p><img src="index_images/pg_364Lab2_Summary_2021_fig2.png" /></p>
<p><br><br></p>
<hr />
<p><br />
</p>
<hr />
</div>
</div>
<div id="week-1" class="section level1">
<h1>WEEK 1</h1>
<p>This week we will try a new approach. I will work through a tutorial
on local autocorrelation using one dataset. Please create a new,
separate Rmd file for the tutorial. Do not work in your lab script for
this part, and do not submit the tutorial file. Follow along and make
sure it knits.</p>
<p>After the tutorial, you will complete a similar analysis on a
different dataset in your actual lab script, using the questions
below.</p>
<div>
<div id="boxgreen">
<p>You should not submit the tutorial file. Creating one simply lets you
follow along and copy code into your main lab script later. <strong>Only
the work in your lab script will be submitted and assessed. We will
DEDUCT MARKS for submitting anything about Chicago/the
tutorial</strong></p>
</div>
</div>
<p><br><br></p>
<div id="a.-getting-the-data" class="section level2">
<h2>A. Getting the data</h2>
<ol style="list-style-type: decimal">
<li>Look at the tutorial</li>
</ol>
<p>Run through <strong>STEP 1</strong> of the tutorial here <a
href="https://psu-spatial.github.io/Geog364-2025/Tutorial_LISA.html"
class="uri">https://psu-spatial.github.io/Geog364-2025/Tutorial_LISA.html</a>
You should stop when you made maps of the city. e.g. don’t carry onto
step 2.</p>
<p><br></p>
<ol start="2" style="list-style-type: decimal">
<li>Create your own,</li>
</ol>
<p>Now, IN YOUR LAB SCRIPT, reproduce the tutorial for any largish city
of your choice in the USA.</p>
<ul>
<li><p>Get the code working and making the plots.</p></li>
<li><p>For each step, in your own words explain what you are doing for
each piece of code and why you chose your city.</p></li>
</ul>
<p>If you get errors, choose a different city!</p>
<p><br><br></p>
</div>
<div id="b.-global-autocorrelation" class="section level2">
<h2>B. Global Autocorrelation</h2>
<ol start="3" style="list-style-type: decimal">
<li>Look at STEP 2 of the tutorial</li>
</ol>
<p>Run through <strong>STEP 2</strong> of the tutorial here <a
href="https://psu-spatial.github.io/Geog364-2025/Tutorial_LISA.html"
class="uri">https://psu-spatial.github.io/Geog364-2025/Tutorial_LISA.html</a>.
Don’t carry onto Local Moran’s I.</p>
<p><br></p>
<ol start="4" style="list-style-type: decimal">
<li>Create your own,</li>
</ol>
<p>Now, continue for your city:</p>
<ul>
<li><p>Creating a single spatial weights matrix <em>of your choice</em>
(e.g. you could use EITHER queens/rooks/nearest neighbour or anything
else)</p></li>
<li><p>Then run a Moran’s scatterplot and Moran’s test. <br></p></li>
<li><p>In the text, fully write out the hypothesis test for your city
(you can choose the alternative hypothesis)</p></li>
<li><p>In the text, describe the pattern you see in the moran’s
scatterplot and relate to your map.</p></li>
</ul>
<p><br><br></p>
</div>
<div id="c.-autocorrelation-lisa" class="section level2">
<h2>C. Autocorrelation LISA</h2>
<ol start="5" style="list-style-type: decimal">
<li>Look at STEP 3 of the tutorial</li>
</ol>
<p>Run through the rest of <strong>STEP 3</strong> of the tutorial here
<a href="https://psu-spatial.github.io/Geog364-2025/Tutorial_LISA.html"
class="uri">https://psu-spatial.github.io/Geog364-2025/Tutorial_LISA.html</a>
.</p>
<p><br></p>
<ol start="6" style="list-style-type: decimal">
<li>Create your own.</li>
</ol>
<p>Now make some LISA plots for your city. We will discuss what these
mean during Wednesdays class.</p>
<p><br></p>
<ol start="7" style="list-style-type: decimal">
<li>Interpret your results in the text.</li>
</ol>
<p>Based on that, see if you can interpret the results for your city in
your lab report. Remember you can change your background map to identify
where places are and do some googling! Your answer should talk about</p>
<ul>
<li><p><strong>What your results mean (e.g. what are the colors and how
do they correspond to your variable)</strong></p></li>
<li><p><strong>The significance of your results e.g. where is highly
significant and where is not?<br />
</strong></p></li>
<li><p><strong>Whether your results correspond to
reality.</strong><br />
For example</p>
<ul>
<li>Is your “high surrounded by high” downtown? rich suburbs?</li>
<li>Is your “low surrounded by low” poorer areas?</li>
<li>Any outliers and can you work out WHY they are outliers<br />
</li>
</ul></li>
</ul>
<p><br><br></p>
</div>
</div>
<div id="week-2" class="section level1">
<h1>WEEK 2</h1>
<div id="d.-update-your-data" class="section level2">
<h2>D. Update your data</h2>
<p>To make your regression example more interesting, let’s update your
data input.</p>
<p><br></p>
<ol start="8" style="list-style-type: decimal">
<li>Update data</li>
</ol>
<ul>
<li>Scroll to the top of your lab report, where you download the census
data. E.g. it will look something like this but for your city</li>
</ul>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a>IL.Census.sf <span class="ot">&lt;-</span> <span class="fu">get_acs</span>(<span class="at">geography =</span> <span class="st">&quot;tract&quot;</span>, </span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a>                <span class="at">year =</span> <span class="dv">2017</span>,</span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a>                <span class="at">variables =</span> <span class="fu">c</span>(<span class="at">total_pop   =</span> <span class="st">&quot;B05012_001&quot;</span>, <span class="co"># total population</span></span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a>                              <span class="at">income.gt75 =</span> <span class="st">&quot;B06010_011&quot;</span>), <span class="co"># people making &gt; 75000 USD</span></span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a>                <span class="at">state =</span> <span class="st">&quot;IL&quot;</span>,</span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a>                <span class="at">survey =</span> <span class="st">&quot;acs5&quot;</span>,</span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a>                <span class="at">geometry =</span> <span class="cn">TRUE</span>,</span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a>                <span class="at">output=</span><span class="st">&quot;wide&quot;</span>,</span>
<span id="cb4-9"><a href="#cb4-9" tabindex="-1"></a>                <span class="at">cache_table =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<ul>
<li>Edit your code to add in these additional variables and re-run (I
just copied in the missing lines leaving the rest identical)</li>
</ul>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a>IL.Census.sf <span class="ot">&lt;-</span> <span class="fu">get_acs</span>(</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>   <span class="at">geography =</span> <span class="st">&quot;tract&quot;</span>,</span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a>   <span class="at">year =</span> <span class="dv">2017</span>,</span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a>   <span class="at">variables =</span> <span class="fu">c</span>(</span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a>      <span class="at">total_pop        =</span> <span class="st">&quot;B05012_001&quot;</span>, <span class="co"># total population</span></span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a>      <span class="at">total_house      =</span> <span class="st">&quot;B25001_001&quot;</span>, <span class="co">#total housing units</span></span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a>      <span class="at">income.gt75      =</span> <span class="st">&quot;B06010_011&quot;</span>,<span class="co"># number of people making &gt; 75000 USD</span></span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a>      <span class="at">med.income       =</span> <span class="st">&quot;B19013_001&quot;</span>, <span class="co">#median income</span></span>
<span id="cb5-9"><a href="#cb5-9" tabindex="-1"></a>      <span class="at">total.foreignppl =</span> <span class="st">&quot;B05012_003&quot;</span>, <span class="co">#number of foreign born people</span></span>
<span id="cb5-10"><a href="#cb5-10" tabindex="-1"></a>      <span class="at">total.BAdegree   =</span> <span class="st">&quot;B15012_001&quot;</span> , <span class="co">#total with at least a bachelors degree</span></span>
<span id="cb5-11"><a href="#cb5-11" tabindex="-1"></a>      <span class="at">total.workhome   =</span> <span class="st">&quot;B08101_049&quot;</span>, <span class="co">#number who work from home#total housing units</span></span>
<span id="cb5-12"><a href="#cb5-12" tabindex="-1"></a>      <span class="at">house.mean_age   =</span> <span class="st">&quot;B25035_001&quot;</span>, <span class="co">#average house age</span></span>
<span id="cb5-13"><a href="#cb5-13" tabindex="-1"></a>      <span class="at">house.mean_beds  =</span> <span class="st">&quot;B25041_001&quot;</span>, <span class="co">#total homes number of beds in the house</span></span>
<span id="cb5-14"><a href="#cb5-14" tabindex="-1"></a>      <span class="at">housetotal.owneroccupied =</span> <span class="st">&quot;B25003_002&quot;</span>, <span class="co">#total homes owner occupied</span></span>
<span id="cb5-15"><a href="#cb5-15" tabindex="-1"></a>      <span class="at">housetotal.broadband  =</span> <span class="st">&quot;B28002_004&quot;</span>), <span class="co">#total homes with broadband access</span></span>
<span id="cb5-16"><a href="#cb5-16" tabindex="-1"></a>   <span class="at">state =</span> <span class="st">&quot;IL&quot;</span>,</span>
<span id="cb5-17"><a href="#cb5-17" tabindex="-1"></a>   <span class="at">survey =</span> <span class="st">&quot;acs5&quot;</span>,</span>
<span id="cb5-18"><a href="#cb5-18" tabindex="-1"></a>   <span class="at">geometry =</span> <span class="cn">TRUE</span>,</span>
<span id="cb5-19"><a href="#cb5-19" tabindex="-1"></a>   <span class="at">output =</span> <span class="st">&quot;wide&quot;</span>,</span>
<span id="cb5-20"><a href="#cb5-20" tabindex="-1"></a>   <span class="at">cache_table =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<ul>
<li>Now scroll down to where you selected the variable names. It should
look like this but for your city</li>
</ul>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="co"># Remove and rename error columns </span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a>IL.Census.sf <span class="ot">&lt;-</span> IL.Census.sf <span class="sc">%&gt;%</span></span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(</span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a>    GEOID, </span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a>    NAME,</span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a>    <span class="at">total_pop    =</span> total_popE, </span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a>    <span class="at">income.gt75  =</span> income.gt75E, </span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a>    geometry )</span></code></pre></div>
<p><br></p>
<ul>
<li>Edit so it looks like this for your city.</li>
</ul>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="co"># Remove and rename error columns </span></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a>IL.Census.sf <span class="ot">&lt;-</span> IL.Census.sf <span class="sc">%&gt;%</span></span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a>   dplyr<span class="sc">::</span><span class="fu">select</span>(</span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a>      GEOID, </span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a>      NAME,</span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a>      <span class="at">total_pop        =</span> total_popE, </span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a>      <span class="at">total_house      =</span> total_houseE,</span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a>      <span class="at">income.gt75      =</span> income.gt75E,</span>
<span id="cb7-9"><a href="#cb7-9" tabindex="-1"></a>      <span class="at">med.income       =</span> med.incomeE, </span>
<span id="cb7-10"><a href="#cb7-10" tabindex="-1"></a>      <span class="at">total.foreignppl =</span> total.foreignpplE,</span>
<span id="cb7-11"><a href="#cb7-11" tabindex="-1"></a>      <span class="at">total.BAdegree   =</span> total.BAdegreeE,             </span>
<span id="cb7-12"><a href="#cb7-12" tabindex="-1"></a>      <span class="at">total.workhome   =</span> total.workhomeE,</span>
<span id="cb7-13"><a href="#cb7-13" tabindex="-1"></a>      <span class="at">house.mean_age   =</span> house.mean_ageE,</span>
<span id="cb7-14"><a href="#cb7-14" tabindex="-1"></a>      <span class="at">house.mean_beds  =</span> house.mean_bedsE,</span>
<span id="cb7-15"><a href="#cb7-15" tabindex="-1"></a>      <span class="at">housetotal.owneroccupied =</span> housetotal.owneroccupiedE,</span>
<span id="cb7-16"><a href="#cb7-16" tabindex="-1"></a>      <span class="at">housetotal.broadband     =</span> housetotal.broadbandE,</span>
<span id="cb7-17"><a href="#cb7-17" tabindex="-1"></a>      geometry )</span></code></pre></div>
<p><br></p>
<ul>
<li>Now find the bit that looks like this where you calculate the
densities</li>
</ul>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a>IL.Census.sf<span class="sc">$</span>pop.density_km2  <span class="ot">&lt;-</span> IL.Census.sf<span class="sc">$</span>total_pop   <span class="sc">/</span> IL.Census.sf<span class="sc">$</span>Area</span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a>IL.Census.sf<span class="sc">$</span>percent.income.gt75  <span class="ot">&lt;-</span> IL.Census.sf<span class="sc">$</span>income.gt75   <span class="sc">/</span> IL.Census.sf<span class="sc">$</span>total_pop</span></code></pre></div>
<ul>
<li>and edit so it looks like this for your city.</li>
</ul>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a>IL.Census.sf <span class="ot">&lt;-</span> IL.Census.sf <span class="sc">%&gt;%</span> </span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a>    <span class="at">pop.density_km2    =</span> total_pop   <span class="sc">/</span> Area,</span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a>    <span class="at">house.density_km2  =</span> total_house <span class="sc">/</span> Area,</span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a>    <span class="at">percent.income.gt75 =</span> income.gt75 <span class="sc">/</span> total_pop,</span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a>    <span class="at">percent.foreignppl =</span> total.foreignppl <span class="sc">/</span> total_pop,</span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a>    <span class="at">percent.BAdegree   =</span> total.BAdegree   <span class="sc">/</span> total_pop,</span>
<span id="cb9-8"><a href="#cb9-8" tabindex="-1"></a>    <span class="at">percent.workhome   =</span> total.workhome   <span class="sc">/</span> total_pop,</span>
<span id="cb9-9"><a href="#cb9-9" tabindex="-1"></a>    <span class="at">housepercent.owneroccupied =</span> housetotal.owneroccupied <span class="sc">/</span> total_house,</span>
<span id="cb9-10"><a href="#cb9-10" tabindex="-1"></a>    <span class="at">housepercent.broadband     =</span> housetotal.broadband     <span class="sc">/</span> total_house  )</span></code></pre></div>
<p><br><br></p>
<div id="boxedtext">
<p><strong>WHY DID I ASK YOU TO DO THIS?</strong> <br><br></p>
<p>The reason I’m asking you to update your code rather than re-download
fresh data is that this mirrors how real data analysis works. When
something in your project changes—especially your input data—it’s
important to adjust your existing script and run it cleanly from the
top. This ensures that your workflow is reproducible and that every
result in your lab comes from the same code, with no hidden steps or
leftover objects from earlier runs. It also prevents accidental copies
of the data, mismatched versions, or silent mistakes that can happen
when you download things manually. <br><br></p>
<p>This habit will matter more and more as your projects get larger: a
careful, repeatable workflow is one of the most valuable skills you can
build in R.</p>
</div>
<p><br><br></p>
</div>
<div id="e.-finding-a-predictor" class="section level2">
<h2>E. Finding a predictor</h2>
<ol start="9" style="list-style-type: decimal">
<li>Look at the tutorial</li>
</ol>
<p>Run through <strong>STEP 1</strong> of the tutorial here <a
href="https://psu-spatial.github.io/Geog364-2025/Tutorial_Regression.html"
class="uri">https://psu-spatial.github.io/Geog364-2025/Tutorial_Regression.html</a>
You should stop when you made maps of the city. e.g. don’t carry onto
step 2.</p>
<p><br></p>
<ol start="10" style="list-style-type: decimal">
<li>Create your own,</li>
</ol>
<p>Now, IN YOUR LAB SCRIPT, get it working for your city.</p>
<ul>
<li><p>Get the code working and making the plots.</p></li>
<li><p>Then look at all your potential predictors and decide which one
you want to use to predict the percentage of people making &gt; 75K in
your city</p></li>
<li><p>Remember to write up your object, population etc and tell me if
you removed any outliers.</p></li>
</ul>
<p>If you get errors, tell Kiely immediately! (or try a different
variable)</p>
<p><br><br></p>
</div>
<div id="f.-regression-model" class="section level2">
<h2>F. Regression model</h2>
<ol start="12" style="list-style-type: decimal">
<li>Look at the tutorial</li>
</ol>
<p>Run through <strong>STEP 2</strong> of the tutorial here <a
href="https://psu-spatial.github.io/Geog364-2025/Tutorial_Regression.html"
class="uri">https://psu-spatial.github.io/Geog364-2025/Tutorial_Regression.html</a>
Don’t carry onto step 3.</p>
<p><br></p>
<ol start="13" style="list-style-type: decimal">
<li>Create your own,</li>
</ol>
<p>Now, IN YOUR LAB SCRIPT, choose the predictor that best predicts your
response variable</p>
<ul>
<li><p>Run a regression model using lm</p></li>
<li><p>Write out the equation using latex, interpret the slope and
intercept in the text</p></li>
<li><p>Add a new scatterplot including the line of best fit (no error
bars e.g. use the tutorial version)</p></li>
</ul>
<p><br><br><br><br></p>
</div>
<div id="g.-mapping-results" class="section level2">
<h2>G. Mapping results</h2>
<ol start="14" style="list-style-type: decimal">
<li>Look at the tutorial</li>
</ol>
<p>Run through <strong>STEP 3</strong> of the tutorial here <a
href="https://psu-spatial.github.io/Geog364-2025/Tutorial_Regression.html"
class="uri">https://psu-spatial.github.io/Geog364-2025/Tutorial_Regression.html</a>
Don’t carry onto step 4.</p>
<p><br></p>
<ol start="15" style="list-style-type: decimal">
<li>Create your own,</li>
</ol>
<p>Now, IN YOUR LAB SCRIPT,</p>
<ul>
<li><p>Make a maps of your response variable, predicted response and
residuals. Make the style your own.</p></li>
<li><p>Discuss what you see in the text &amp; interpret how good the
model is in your opinion.</p></li>
</ul>
<p><br><br></p>
</div>
<div id="h.-spatial-residuals" class="section level2">
<h2>H. Spatial residuals</h2>
<ol start="15" style="list-style-type: decimal">
<li>Look at the tutorial</li>
</ol>
<p>Run through <strong>STEP 4</strong> of the tutorial here <a
href="https://psu-spatial.github.io/Geog364-2025/Tutorial_Regression.html"
class="uri">https://psu-spatial.github.io/Geog364-2025/Tutorial_Regression.html</a></p>
<p><br></p>
<ol start="16" style="list-style-type: decimal">
<li>Create your own for your city</li>
</ol>
<p>Now, IN YOUR LAB SCRIPT,</p>
<ul>
<li><p>Make a Moran’s Scatterplot of your residuals and interpret what
you see in the text</p></li>
<li><p>Run a full two sided moran’s hypothesis test on your residuals
and write out everything in the text</p></li>
<li><p>Run a LISA analysis on your residuals and interpret in the
text.</p></li>
</ul>
<p><br><br></p>
</div>
<div id="i.-lab-summary" class="section level2">
<h2>I. Lab Summary</h2>
<p><br></p>
<ol start="17" style="list-style-type: decimal">
<li>Reflection</li>
</ol>
<p>Finally, imagine you are helping with some some analysis for your
chosen city’s council. Explain in clear language what you have found
for:</p>
<ul>
<li><p>The autocorrelation &amp; patterns in population density</p></li>
<li><p>The spatial pattern of people making more than $75K and links to
the underlying processes for your particular city/geography.</p></li>
<li><p>What variables show promise in predicting the number of people
making more than $75K</p></li>
<li><p>Whether your model meets the requirement of spatial independence
and if there are any spatial patterns that are particularly interesting
in the residuals.</p></li>
<li><p>Finally, if you could add a SECOND variable to account for some
of the remaining spatial variability, what would you choose (either in
the list you downloaded or more widely).</p></li>
</ul>
<ol start="18" style="list-style-type: decimal">
<li>Tidy up your report</li>
</ol>
<p>Now go back and tidy up your report.</p>
<ul>
<li><p>Add headings, subheadings etc so it’s easy for us to find all
your answers.</p></li>
<li><p>Check everything has units included</p></li>
<li><p>Make sure your code isn’t printing out loads and loads of
spurious numbers/text, You don’t have to include every line of code you
wrote.</p></li>
<li><p>Make sure everything in your lab is linked to YOUR city. Any
tutorial/Chicago examples should be separate (and you don’t need to
submit thm)</p></li>
</ul>
<p><br><br></p>
</div>
</div>
<div id="submitting-your-lab" class="section level1">
<h1>Submitting your Lab</h1>
<p>Remember to save your work throughout and to spell check your writing
(next to the save button). Now, press the knit button again. If you have
not made any mistakes in the code then R should create a html file in
your lab3 folder, complete with a very recent time-stamp.</p>
<p><br><br></p>
<div id="if-you-are-on-posit-cloud" class="section level3">
<h3>If you are on posit cloud:</h3>
<p>You can download each of your .RmD and html files by:</p>
<ul>
<li><p>Clicking on the little box next to the Rmd in the Files tab, then
going to the little blue cogwheel (might need to make your Rstudio full
screen) and clicking export.<br></p></li>
<li><p>Repeat the process exactly for the html file underneath it (e,g,
just have the html clicked.)<br></p></li>
<li><p>Now go to Canvas and submit BOTH your html and your .Rmd file in
Lab 6.</p></li>
</ul>
<p><br></p>
</div>
<div id="posit-desktop" class="section level3">
<h3>Posit desktop</h3>
<ul>
<li><p>Go to your Lab 6 folder, In that folder, double click on the html
file. This will open it in your browser. CHECK THAT THIS IS WHAT YOU
WANT TO SUBMIT <br></p></li>
<li><p>Now go to Canvas and submit BOTH your html and your .Rmd file in
Lab 6.<br></p></li>
</ul>
<p><br><br></p>
<hr />
<p><br />
</p>
</div>
</div>
<div id="grading-rubric" class="section level1">
<h1>GRADING RUBRIC</h1>
<p>To come</p>
<p><br><br></p>
<div id="overall" class="section level2">
<h2>Overall</h2>
<p>Overall, here is what your lab should correspond to:</p>
<table class=" lightable-classic-2 table table-striped table-hover table-responsive" style="color: black; font-family: &quot;Arial Narrow&quot;, &quot;Source Sans Pro&quot;, sans-serif; margin-left: auto; margin-right: auto; color: black; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
Grade
</th>
<th style="text-align:left;">
% Mark
</th>
<th style="text-align:left;">
Rubric
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
A*
</td>
<td style="text-align:left;">
98-100
</td>
<td style="text-align:left;">
Exceptional.  Not only was it near perfect, but the graders learned
something.  THIS IS HARD TO GET.
</td>
</tr>
<tr>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
96+
</td>
<td style="text-align:left;">
You went above and beyond
</td>
</tr>
<tr>
<td style="text-align:left;">
A
</td>
<td style="text-align:left;">
93+:
</td>
<td style="text-align:left;">
Everything asked for with high quality.   Class example
</td>
</tr>
<tr>
<td style="text-align:left;">
A-
</td>
<td style="text-align:left;">
90+
</td>
<td style="text-align:left;">
The odd minor mistake, All code done but not written up in full
sentences etc. A little less care
</td>
</tr>
<tr>
<td style="text-align:left;">
B+
</td>
<td style="text-align:left;">
87+
</td>
<td style="text-align:left;">
More minor mistakes.  Things like missing units, getting the odd
question wrong, no workings shown
</td>
</tr>
<tr>
<td style="text-align:left;">
B
</td>
<td style="text-align:left;">
83+
</td>
<td style="text-align:left;">
Solid work but the odd larger mistake or missing answer.  Completely
misinterpreted something, that type of thing
</td>
</tr>
<tr>
<td style="text-align:left;">
B-
</td>
<td style="text-align:left;">
80+
</td>
<td style="text-align:left;">
Starting to miss entire/questions sections, or multiple larger mistakes.
Still a solid attempt. 
</td>
</tr>
<tr>
<td style="text-align:left;">
C+
</td>
<td style="text-align:left;">
77+
</td>
<td style="text-align:left;">
You made a good effort and did some things well, but there were a lot of
problems. (e.g. you wrote up the text well, but messed up the code)
</td>
</tr>
<tr>
<td style="text-align:left;">
C
</td>
<td style="text-align:left;">
70+
</td>
<td style="text-align:left;">
It’s clear you tried and learned something.  Just attending labs will
get you this much as we can help you get to this stage
</td>
</tr>
<tr>
<td style="text-align:left;">
D
</td>
<td style="text-align:left;">
60+
</td>
<td style="text-align:left;">
You attempt the lab and submit something. Not clear you put in much
effort or you had real issues
</td>
</tr>
<tr>
<td style="text-align:left;">
F
</td>
<td style="text-align:left;">
0+
</td>
<td style="text-align:left;">
Didn’t submit, or incredibly limited attempt. 
</td>
</tr>
</tbody>
</table>
<p>And.. finished!</p>
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
