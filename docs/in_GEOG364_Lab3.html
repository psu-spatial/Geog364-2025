<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Lab 3:</title>

<script src="site_libs/header-attrs-2.29/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.13.2/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/kePrint-0.0.1/kePrint.js"></script>
<link href="site_libs/lightable-0.0.1/lightable.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>



<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<link rel="stylesheet" href="projectlab.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html"></a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="in_GEOG364_FAQ.html">FAQs</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    YOUR LABS
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="in_GEOG364_Lab1.html">Lab 1: Basics</a>
    </li>
    <li>
      <a href="in_GEOG364_Lab2.html">Lab 2: Data summary</a>
    </li>
    <li>
      <a href="in_GEOG364_Lab3.html">Lab 3: Spatial Basics</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Lab 3:</h1>

</div>


<hr />
<p><br />
</p>
<div id="welcome-to-lab-3" class="section level1">
<h1>Welcome to Lab 3!</h1>
<p><strong>Aim of the lab</strong></p>
<ul>
<li><p>Practice setting up and managing a structured RStudio project
using spatial and non-spatial data</p></li>
<li><p>Use exploratory data analysis (EDA) to summarise and interpret
real-world housing data for a non-technical audience</p></li>
<li><p>Define and explain core data concepts: object of analysis,
variables (with units), population, sampling frame, and
representativeness</p></li>
<li><p>Convert tabular data into a spatial format using coordinates, and
describe spatial attributes such as data type and spatial fallacy
risks</p></li>
<li><p>Create both quick and professional-quality spatial visualisations
using tmap</p></li>
<li><p>Develop confidence in communicating data insights through clear
language, maps, and plots tailored to an end user (your friend)</p></li>
</ul>
<p><br />
</p>
<div id="boxedtext">
<p><br />
<strong>Getting help</strong><br />
- Kiely (and often Dr G) will be present during your lab sessions. This
is the easiest way to get help.<br />
- There is a Piazza discussion board. Kiely will explain more in this
week‚Äôs lab and will check it at least once a day.<br />
- Dr G has weekly office hours and genuinely enjoys helping with R, even
if you feel stuck or overwhelmed.<br />
- If you have posted on Piazza and received no response after 24 hours,
you may send a Canvas message to Kiely or Dr G (or if you are completely
lost).<br />
<br />
</p>
</div>
<p><br />
</p>
<hr />
<p><br />
</p>
</div>
<div id="set-up.-dont-skip" class="section level1">
<h1>Set-up. DON‚ÄôT SKIP!</h1>
<p><br />
</p>
<div id="create-a-project-get-the-data" class="section level3">
<h3>Create a project &amp; get the data</h3>
<p>There are two options here depending on whether you are using
R-studio on the website (posit cloud) or your own computer (R-Desktop).
If you are using a lab computerm choose the R-Desktop route.</p>
<div id="option-1.-posit-cloud-website-users" class="section level4">
<h4>Option 1. Posit Cloud Website Users</h4>
<details>
<summary>
Task 1. Get the data from Canvas
</summary>
<p><br></p>
<p>Go to the Lab 3 Canvas page and download the dataset
<code>Lab03_house.xlsx</code> <br></p>
</details>
<div class="small-gap">

</div>
<details>
<summary>
Task 2. Create a project for Lab 3 (expand for instructions)
</summary>
<div class="collapsible-content">
<iframe src="https://psu-spatial.github.io/Stat462-2025/T5_ProjectsPositCloud.html" style="width: 100%; height: 700px; border: none;">
</iframe>
</div>
<p><br></p>
</details>
<div class="small-gap">

</div>
<details>
<summary>
Task 3. Upload your dataset to the website. (expand for reminder)
</summary>
<p><img src="index_images/im_T2_Upload.png" /></p>
</details>
<div class="small-gap">

</div>
<details>
<summary>
Task 4. Install more packages (expand for instructions)
</summary>
<p><br></p>
<p>Unfortunately on the website you need to install your packages each
time.<br>Go to to the packages tab, click install to get to the
app-store and download/install these packages:</p>
<ul>
<li><code>readxl</code></li>
<li><code>viridis</code></li>
<li><code>ggstatsplot</code></li>
<li><code>terra</code></li>
<li><code>tigris</code></li>
<li><code>tidyverse</code></li>
<li><code>dplyr</code></li>
<li><code>tmap</code></li>
<li><code>elevatr</code></li>
<li><code>osmdata</code></li>
</ul>
<p>We will also need a package called sf, which runs a lot of the
spatial commands in R. Unfortunately, posit cloud sometimes has a few
technical issues with sf, so you will need to run a special command.</p>
<p>IN THE CONSOLE, run these two commands.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;remotes&quot;</span>)</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="at">repo =</span> <span class="st">&quot;r-spatial/sf&quot;</span>, <span class="at">ref =</span> <span class="st">&quot;93a25fd8e2f5c6af7c080f92141cb2b765a04a84&quot;</span>)</span></code></pre></div>
<p>T6_Packages.html <br><em>Reminder: <a
href="https://psu-spatial.github.io/Stat462-2025/T6_Packages.html">Tutorial:
Packages cheatsheet</a></em>.</p>
</details>
</div>
<div id="option-2.-r-desktop-users" class="section level4">
<h4>Option 2. R-Desktop Users</h4>
<details>
<summary>
Task 1. Create a project for Lab 3
</summary>
<p><br></p>
<div class="collapsible-content">
<iframe src="https://psu-spatial.github.io/Stat462-2025/T5_ProjectsRDesktop.html" style="width: 100%; height: 700px; border: none;">
</iframe>
</div>
</details>
<div class="small-gap">

</div>
<details>
<summary>
Task 2. Get the data &amp; <strong>put in your Lab 3 folder</strong>
</summary>
<p><br></p>
<p>Go to the Lab 3 Canvas page and download the dataset
<code>Lab03_house.xlsx</code>. <strong>Put it in your lab 3
folder.</strong></p>
</details>
<div class="small-gap">

</div>
<details>
<summary>
Task 3. Install some packages
</summary>
<p><br></p>
<p>We need to install some more packages.<br>Go to to the packages tab,
click install to get to the app-store and download/install these
packages. If your computer says its missing a package later on, install
anything it suggests.</p>
<ul>
<li><code>elevatr</code></li>
<li><code>osmdata</code></li>
</ul>
<p>Remember DO NOT put <code>install.packages()</code> into your
lab-script - copy and paste it into thee console.</p>
<p><br><em>Reminder: <a
href="https://hgreatrex.github.io/Geog364_2024/pg_Tut3_basics.html#Tutorial_3G:_Packages">Tutorial:
Packages cheatsheet</a></em>.</p>
</details>
<p><br></p>
</div>
</div>
<div id="set-up-your-lab-3-report" class="section level3">
<h3>Set-up your Lab 3 report</h3>
<p>You are welcome to use/edit the template you made in lab 2. If you
are unsure what I mean by that, follow these instructions.</p>
<details>
<summary>
Task. Create your RMarkdown file - expand &amp; look at Tutorial 4B and
4C
</summary>
<p><br></p>
<div class="collapsible-content">
<iframe src="https://hgreatrex.github.io/Geog364_2024/pg_Tut4_markdown.html#Tutorial_4B:_Creating_a_markdown_document" style="width: 100%; height: 700px; border: none;">
</iframe>
</div>
</details>
<div class="small-gap">

</div>
<details>
<summary>
Task. Edit your YAML code
</summary>
<p><br></p>
<p>Lets use similar options to Lab 2, although you could try a different
theme. Remember YAML code is annoying to edit, because here, <em>spaces
really do matter</em>. Everything has to be perfect or it won‚Äôt
knit.</p>
<p><strong>Select everything in my code chunk here and replace your YAML
with this (remember the ‚Äî on line 1 and at the end).</strong></p>
<p>Now edit the author name to your own. If you wonder what Sys.Date()
is, don‚Äôt touch it - it automatically gives you the current date.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="sc">---</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a>title<span class="sc">:</span> <span class="st">&quot;GEOG-364 - Lab 3&quot;</span></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a>author<span class="sc">:</span> <span class="st">&quot;hlg5155&quot;</span></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a>date<span class="sc">:</span> <span class="st">&quot;`r Sys.Date()`&quot;</span></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a>output<span class="sc">:</span></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a>  html_document<span class="sc">:</span></span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a>    toc<span class="sc">:</span> true</span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a>    toc_float<span class="sc">:</span> yes</span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a>    number_sections<span class="sc">:</span> yes</span>
<span id="cb2-10"><a href="#cb2-10" tabindex="-1"></a>    theme<span class="sc">:</span> lumen</span>
<span id="cb2-11"><a href="#cb2-11" tabindex="-1"></a>    df_print<span class="sc">:</span> paged</span>
<span id="cb2-12"><a href="#cb2-12" tabindex="-1"></a><span class="sc">---</span></span></code></pre></div>
</details>
<div class="small-gap">

</div>
<details>
<summary>
Task. Change the theme and knit
</summary>
<p><br></p>
<p>In the YAML code, change the theme to any one of your choice that
isn‚Äôt not lumen (see here to view available themes - <a
href="https://bootswatch.com/"
class="uri">https://bootswatch.com/</a>.). <br></p>
<p>Some might not work, but these are likely to: ‚Äúdefault‚Äù, ‚Äúbootstrap‚Äù,
‚Äúcerulean‚Äù, ‚Äúcosmo‚Äù, ‚Äúdarkly‚Äù, ‚Äúflatly‚Äù, ‚Äújournal‚Äù, ‚Äúlumen‚Äù, ‚Äúpaper‚Äù,
‚Äúreadable‚Äù, ‚Äúsandstone‚Äù, ‚Äúsimplex‚Äù, ‚Äúspacelab‚Äù, ‚Äúunited‚Äù, ‚Äúyeti‚Äù.</p>
</details>
<div class="small-gap">

</div>
<details>
<summary>
Task. Clean the file and create/run your library code chunk
</summary>
<p><br></p>
<ul>
<li><p>Click on your lab script (the Rmd file) and delete all the
‚Äòwelcome text‚Äô after line 11.<br>Press enter a few times and make a new
level-1 heading called <code>Set Up</code>.<br></p></li>
<li><p>We should have all the packages we need installed, but we need to
open them. Make a new code chunk containing this code.<br></p></li>
</ul>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a><span class="fu">library</span>(terra)</span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a><span class="fu">library</span>(tmap)</span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a><span class="fu">library</span>(elevatr)</span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a><span class="fu">library</span>(osmdata)</span>
<span id="cb3-9"><a href="#cb3-9" tabindex="-1"></a><span class="fu">library</span>(ggstatsplot)</span>
<span id="cb3-10"><a href="#cb3-10" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb3-11"><a href="#cb3-11" tabindex="-1"></a><span class="fu">library</span>(hrbrthemes)</span>
<span id="cb3-12"><a href="#cb3-12" tabindex="-1"></a><span class="fu">library</span>(ggthemes)</span>
<span id="cb3-13"><a href="#cb3-13" tabindex="-1"></a><span class="fu">library</span>(viridis)</span>
<span id="cb3-14"><a href="#cb3-14" tabindex="-1"></a><span class="fu">library</span>(RColorBrewer)</span>
<span id="cb3-15"><a href="#cb3-15" tabindex="-1"></a><span class="fu">library</span>(plotly)</span></code></pre></div>
<p><br></p>
<ul>
<li><p>Press the green arrow on the right of the code chunk to run the
code inside it. You will see a load of ‚Äúloading text‚Äù telling your
details about the packages you just loaded.<br><br> Press the green
arrow AGAIN. The text should disappear unless there is an
error.<br></p></li>
<li><p>Note, remember to run this code chunk EVERY TIME your start
R-Studio (in the same way you need to click on an app on your phone
before you can use it). <br></p></li>
</ul>
<p><br></p>
</details>
<div class="small-gap">

</div>
<details>
<summary>
Task. Add warning=FALSE and message=FALSE to your library code chunk.
</summary>
<p><br></p>
<ul>
<li>Expand here for a tutorial.</li>
</ul>
<div class="collapsible-content">
<iframe src="https://psu-spatial.github.io/Stat462-2025/T7_Markdown_4bCodeChunkOptions.html" style="width: 100%; height: 700px; border: none;">
</iframe>
</div>
</details>
<div class="small-gap">

</div>
</div>
<div id="check-your-progress" class="section level3">
<h3>Check your progress</h3>
<p>Your lab script should now look similar this, but with your theme and
YAML options of choice (you might have a few different libraries than in
my screenshot). You should also be able to knit it successfully. If not,
go back and do the previous sections!</p>
<p><br></p>
<p><img src="index_images/pg_364Lab2_Summary_2021_fig2.png" /></p>
<p><br></p>
<p><br />
</p>
<hr />
<p><br />
</p>
</div>
</div>
<div id="moving-to-taiwan" class="section level1">
<h1>Moving to Taiwan</h1>
<p>The aim of EVERY LAB is to get comfortable writing up analyses of a
complex dataset for a specific person or user. The modelling steps may
be similar across labs, but the topic and context will vary‚Äîso you‚Äôll
need to think carefully about what matters in each case.</p>
<p><br></p>
<div id="week-1" class="section level2">
<h2>WEEK 1</h2>
<p>Your friend is about to move to Sindian District in New Taipei City,
Taiwan. They‚Äôre thinking about buying a house‚Äîand they‚Äôve asked for your
help figuring out what affects house prices in the area. This matters a
lot because housing costs have soared in recent years: <a
href="https://english.cw.com.tw/article/article.action?id=3416">Who can
afford to live in Taipei?</a></p>
<p>Luckily, you‚Äôve found a dataset, <code>Lab03_house.xlsx</code>, to
help. This is real-life data, described in detail here: <a
href="https://archive.ics.uci.edu/dataset/477/real+estate+valuation+data+set">UCI
Real Estate Valuation Data Set</a></p>
<p><br></p>
<p><strong>Your Goal</strong></p>
<p>To understand which factors influence house prices in Sindian
District, New Taipei City, Taiwan, and communicate your results to a
non-technical reader.</p>
<p><strong>You are writing the rest of this report for your
friend!</strong><br />
Make sure to explain your findings clearly. Your friend doesn‚Äôt study
data science or geography, so use language that they can understand and
explain any jargon.</p>
<p><br></p>
<div id="summary-analysis" class="section level3">
<h3>Summary analysis</h3>
<p><br />
</p>
<ol style="list-style-type: decimal">
<li>In your report, create a new Level 1 heading called
<code>House Prices</code>.</li>
</ol>
<p>Remember that you can click Visual mode and use the menu to do this,
or put a single # at the front.</p>
<p><br />
</p>
<ol start="2" style="list-style-type: decimal">
<li>Check you are running your project</li>
</ol>
<p>Before doing anything else, make sure:</p>
<ul>
<li>You are running this lab inside your Lab 3 RStudio project</li>
<li><code>Lab03_house.xlsx</code> is saved/uploaded in your <em>Lab 3
project folder</em> next to your lab report.</li>
</ul>
<p>If not, go back to the <strong>setup section</strong> of this lab
before continuing. The code below will not work until your project and
files are properly set up. Also remmeber that you need to open your lab
3 project every time you reopen R-studio.</p>
<p><br />
</p>
<ol start="2" style="list-style-type: decimal">
<li>Read in the data using read_excel()</li>
</ol>
<p>Once you‚Äôre ready, make a code chunk and write a line of code that
uses <code>read_excel(FILENAME)</code> to read the Excel file into R,
and <strong>assign/save it a variable called house</strong>.</p>
<details>
<summary>
Expand here for a tutorial on how to do this - scroll down to section
1.4
</summary>
<div class="collapsible-content">
<iframe src="https://psu-spatial.github.io/Stat462-2025/in_T07_ReadingInData.html#14_Reading_in_excel_files" style="width: 95%; height: 600px; border: none;">
</iframe>
</div>
</details>
<div class="small-gap">

</div>
<div id="boxgreen">
<p><strong>üîç Reminder</strong> This command will only work if you have
already run the library code chunk that loads the readxl package - and
you need to re-run the library code chunk every time you open R.</p>
</div>
<p><br />
</p>
<ol start="4" style="list-style-type: decimal">
<li>Summarise the data for your friend using code, plots and words</li>
</ol>
<p>Your goal here is to use R summary commands and plots, along with the
background reading, to explore and describe your dataset for your
friend. You want to help them understand what yor does (and doesn‚Äôt)
include, and to explain what it can tell them about house prices in New
Taipei City.</p>
<ul>
<li><p><strong>If you haven‚Äôt already, start by reading the dataset
description here: <a
href="https://archive.ics.uci.edu/ml/datasets/Real+estate+valuation+data+set">Real
estate valuation data set ‚Äì UCI</a></strong></p></li>
<li><p><strong>In your report, use command like <code>summary()</code>
OR <code>skim()</code> (or others!) to explore the house data. See the
tutorials below.</strong></p></li>
<li><p><strong>Underneath the code chunk in your reports, write a short
section that describes the dataset in clear language for your friend.
This should must include:</strong> <br></p>
<ul>
<li>The object of analysis:<br />
What does each row in the dataset represent? <br><br></li>
<li>A list of the variables AND THEIR UNITS:<br />
Briefly describe each column in the data, including what it measures and
the unit (e.g., meters, years). Remember the dataset description
website‚Ä¶ <br><br></li>
<li>The ‚Äòstrict population‚Äô (sampling frame):<br />
If you were being really strict, what does this sample
cover.<br><br></li>
<li>A reasonable, justifiable target population:<br />
Based on this sample, what group do you think the data can reasonably be
used to represent? <br><br></li>
<li>A clear, professional-looking histogram of house prices in a new
code chunk:<br />
See the tutorials below <br><br></li>
<li>Summary statistics of the variables, explained in context for your
friend:<br />
Choose a few key variables and explain what the numbers in the summary
mean for your friend. For example, can they walk to the station from
most places? Are most of the homes near shops? What range of prices are
there? <br><br></li>
<li>Note any data limitations:¬†For example - spatio-temporal coverage?
sample bias? missing variables? other things?</li>
<li>Overall, summarise if you think the sample is representative of your
friend‚Äôs needs.</li>
</ul></li>
</ul>
<details>
<summary>
Expand here for a tutorial on how to summarise data. Click section 2.3
</summary>
<div class="collapsible-content">
<iframe src="https://psu-spatial.github.io/Stat462-2025/CH3_EDA.html#23_Summary_Statistics" style="width: 95%; height: 600px; border: none;">
</iframe>
</div>
</details>
<div class="small-gap">

</div>
<details>
<summary>
Expand here for a tutorial on how to make histograms. Click section 2
</summary>
<div class="collapsible-content">
<iframe src="https://psu-spatial.github.io/Stat462-2025/in_T11_Plots.html#21_Set-up" style="width: 95%; height: 600px; border: none;">
</iframe>
</div>
</details>
<div class="small-gap">

</div>
<p><br></p>
</div>
<div id="making-your-data-spatial" class="section level3">
<h3>Making your data ‚Äúspatial‚Äù</h3>
<ol start="5" style="list-style-type: decimal">
<li>Make the data ‚Äúspatial‚Äù.</li>
</ol>
<p>Unlike standard statistics, our data also has spatial
characteristics. At the moment, R doesn‚Äôt ‚Äòunderstand‚Äô that the data is
spatial. In this section we force R to view the data as spatial.</p>
<ul>
<li><p>Make a new heading called spatial analysis in your report
<br><br></p></li>
<li><p>First, we need to know the COLUMN NAMES of the x and y
coordinates (case sensitive). The easiest way to get these is to make a
new code chunk and run this command.</p></li>
</ul>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="fu">names</span>(house)</span></code></pre></div>
<p><br></p>
<ul>
<li>We can now use the st_as_sf() command to make a spatial version of
the data. Because we‚Äôre using the sf package to do this, I have named
the resulting dataset house_sf(). Make a new code chunk, copy in the
code below and change ‚ÄúX_COLUMN_NAME‚Äù and ‚ÄúY_COLUMN_NAME‚Äù to the
appropriate column name from your data.</li>
</ul>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="co"># Hint, the y direction is Latitude..</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>house_sf <span class="ot">&lt;-</span> <span class="fu">st_as_sf</span>(house,<span class="at">coords=</span><span class="fu">c</span>(<span class="st">&quot;X_COLUMN_NAME&quot;</span>,<span class="st">&quot;Y_COLUMN_NAME&quot;</span>),<span class="at">crs=</span><span class="dv">4326</span>)</span></code></pre></div>
<ul>
<li><p>Lets see what you did. In the environment tab, click on the NAME
house_sf, or in the console type View(house_sf). You should open a new
tab with the spreadsheet. Note that the longitude and latitude columns
have disappared! They have been replaced by a geometry column which
understands that we are looking at point data.</p></li>
<li><p>Equally, in a new code chunk, type house_sf (by itself) and run.
You will see a summary of the data including its spatial attributes (map
projection, bounding box..)</p></li>
</ul>
<p><br></p>
<ol start="6" style="list-style-type: decimal">
<li>Explain the spatial attributes</li>
</ol>
<p>Below this code, answer these questions</p>
<ul>
<li><p>Explain if your data is being represented as a vector (and what
type) or raster. Discuss if this is true in real life and if this
representation is appropriate for the reason you need the data.</p></li>
<li><p>Do you need to worry about the locational fallacy in this case?
Explain your answer to your friend.</p></li>
</ul>
<p><br />
</p>
<ol start="7" style="list-style-type: decimal">
<li>Make some quick maps.</li>
</ol>
<p>There is a quick way to check your data was read in correctly. Make a
map! The quickest way to do this is using the qtm command.</p>
<ul>
<li><p>Make a new section called maps</p></li>
<li><p>Try each of these commands in a new code chunk for each. They
should show you some nice maps over Taiwan.</p></li>
<li><p>If your data looks weird, you probably mixed up long and lat. Go
back to the previous step, change it and rerun - or ask Kiely!</p></li>
</ul>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="co">#Set the mode to &quot;view&quot; for an interactive map</span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="fu">tmap_mode</span>(<span class="st">&quot;view&quot;</span>)</span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a><span class="co"># Make a &quot;quick thematic map&quot; of the house data</span></span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a><span class="fu">qtm</span>(house_sf)</span></code></pre></div>
<p>You can also have a look at variables. For example:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="co"># A map where the colors are linked to house price.</span></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="fu">qtm</span>(house_sf,<span class="at">fill=</span><span class="st">&quot;House.Price&quot;</span>)</span></code></pre></div>
<p>If you hate the interactive-ness, change tm_mode to ‚Äúplot‚Äù (but you
lose the background map).</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="co"># Change the mode to &quot;plot&quot; for a static map</span></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a><span class="fu">tmap_mode</span>(<span class="st">&quot;plot&quot;</span>)</span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a><span class="co"># Re-run the same qtm() command to produce a static version</span></span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a><span class="fu">qtm</span>(house_sf,<span class="at">fill=</span><span class="st">&quot;House.Price&quot;</span>)</span></code></pre></div>
<p>We will make a better static map below!</p>
<p><br />
</p>
</div>
<div id="making-better-maps" class="section level3">
<h3>Making better maps</h3>
<p>QTM is great for quick looks, but in terms of making professional
output, it can be hard to get it to look really good. So here‚Äôs how to
make professional looking maps of your output that you can use in a pdf
or printout.</p>
<p><br></p>
<div id="the-tmap-package" class="section level4 unnumbered">
<h4 class="unnumbered">The tmap package</h4>
<p>The first thing to know is that tmap is currently going through a
HUGE revamp. Code that used to work for ‚Äúversion 3‚Äù is being switched to
‚Äúversion 4‚Äù. I think I have all of it, but if you see warning messages,
you can either ignore them or ask chatgpt what the updated code is.</p>
<p>This is a very detailed guide. <a
href="https://tmap.geocompx.org/nutshell"
class="uri">https://tmap.geocompx.org/nutshell</a></p>
<p>In tmap, we build maps in LAYERS. We connect each layer with with the
+ sign - First, we choose the dataset we want using tm_shape(), <br> -
Then we choose how to represent it (e.g.¬†dots for points, raster for
grids, polygons for areas)<br> - Then we can add overall map layers like
legends or basemaps. <br></p>
<p><br></p>
<ol start="7" style="list-style-type: decimal">
<li>Get the basic tmap code running</li>
</ol>
<ul>
<li>Make a new code chunk and copy and run this code. Although the
structure is there, I PURPOSELY chose settings that made the map look
terrible! In the next step, you will fix this. In this step, I want to
make sure you can get the code to run.</li>
</ul>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="co"># A better static map</span></span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="co"># set up a color scale for your variable</span></span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a>distance_color_scale <span class="ot">&lt;-</span> <span class="fu">tm_scale_intervals</span>(<span class="at">values =</span> <span class="st">&quot;brewer.blues&quot;</span>, <span class="at">style =</span> <span class="st">&quot;equal&quot;</span>)</span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a></span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a><span class="co"># and plot</span></span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a><span class="fu">tmap_mode</span>(<span class="st">&quot;plot&quot;</span>)</span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a><span class="fu">tm_shape</span>(house_sf) <span class="sc">+</span></span>
<span id="cb9-8"><a href="#cb9-8" tabindex="-1"></a>  <span class="fu">tm_dots</span>(</span>
<span id="cb9-9"><a href="#cb9-9" tabindex="-1"></a>    <span class="at">fill        =</span> <span class="st">&quot;Distance.Station&quot;</span>,</span>
<span id="cb9-10"><a href="#cb9-10" tabindex="-1"></a>    <span class="at">size        =</span> <span class="dv">6</span>,</span>
<span id="cb9-11"><a href="#cb9-11" tabindex="-1"></a>    <span class="at">fill.scale  =</span> distance_color_scale,</span>
<span id="cb9-12"><a href="#cb9-12" tabindex="-1"></a>    <span class="at">fill.legend  =</span> <span class="fu">tm_legend</span>(<span class="st">&quot;Title?? Units??&quot;</span>)) <span class="sc">+</span></span>
<span id="cb9-13"><a href="#cb9-13" tabindex="-1"></a><span class="fu">tm_basemap</span>(<span class="at">server =</span> <span class="st">&quot;CartoDB.VoyagerNoLabels&quot;</span>)</span></code></pre></div>
<ol start="7" style="list-style-type: decimal">
<li>Make a better map in tmap</li>
</ol>
<ul>
<li>Expand the tutorials below to understand how to modify the code.
<br></li>
<li>Then make a BETTR static map than the one above for the DISTANCE TO
THE STATION for each house.<br></li>
<li>It should be: <br>
<ul>
<li>Useful for your friend to see the distance to the station for each
house.<br></li>
<li>Contain some useful background map to help you assess the
pattern/process<br></li>
<li>Colorblind friendly<br></li>
<li>Have your own personal stamp on it!</li>
</ul></li>
</ul>
<p><br></p>
<details>
<summary>
Expand here for a tutorial on tm_scale_intervals
</summary>
<p><br></p>
<p><strong>What <code>tm_scale_intervals()</code> does</strong> <br></p>
<p><code>tm_scale_intervals()</code> tells R how to cut your data into
classes and which color palette to use.</p>
<p>For example:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a>price_scale <span class="ot">&lt;-</span> <span class="fu">tm_scale_intervals</span>(<span class="at">values =</span> <span class="st">&quot;viridis&quot;</span>, <span class="at">style =</span> <span class="st">&quot;jenks&quot;</span>)</span></code></pre></div>
<ul>
<li>tm_scale_intervals() : the name of the command</li>
<li><code>values = "viridis"</code> : use the viridis color palette</li>
<li><code>style = "jenks"</code> : use the jenks technique to split the
data into intervals</li>
</ul>
<p><br><br></p>
<p><strong>Choosing a <code>style</code></strong> <br></p>
<p>Styles listed roughly from most to less common. All create intervals
in different ways‚Äîtry a few to see what looks best. <strong>There‚Äôs no
single ‚Äúright‚Äù style‚Äîexperiment and pick the clearest map.</strong></p>
<p><br></p>
<ul>
<li><strong>jenks</strong> ‚Äì natural clusters (great first try for
environmental or socio-economic data)</li>
<li><strong>quantile</strong> ‚Äì same number of features per class (good
for highlighting rank)</li>
<li><strong>equal</strong> ‚Äì equal-width ranges (good if data are fairly
uniform)</li>
<li><strong>pretty</strong> ‚Äì nicely rounded numbers (simple readable
map)</li>
<li><strong>fixed</strong> ‚Äì you set the breakpoints (e.g.¬†policy
thresholds)</li>
<li><strong>sd</strong> ‚Äì classes by standard deviation from mean
(emphasises difference from average)</li>
<li><strong>kmeans</strong>, <strong>hclust</strong>,
<strong>bclust</strong> ‚Äì cluster-based (useful for complex
distributions)</li>
<li><strong>fisher</strong> ‚Äì another algorithm for natural breaks</li>
<li><strong>dpih</strong>, <strong>headtails</strong>,
<strong>log10_pretty</strong>, <strong>cat</strong> ‚Äì special cases
(e.g.¬†heavy tails, log scale, or already-categorical data)</li>
</ul>
<p><br><br></p>
<p><strong>Colour palettes</strong> <br></p>
<p>There are MANY palettes; just type the name in
<code>values = "palette_name"</code>. Good defaults:
<code>"viridis"</code>, <code>"plasma"</code>, <code>"cividis"</code>,
or any RColorBrewer name like <code>"brewer.blues"</code>.</p>
<p>For more choice and built-in colourblind checking, we can use the new
cols4all package.</p>
<ul>
<li>Go to the Packages tab, click install and install
<code>cols4all</code></li>
<li>Go to the Packages tab, click install and install
<code>shinyjs</code></li>
<li>Now go to your library code chunk at the top, add
<code>library(cols4all)</code> and run</li>
<li>IN THE CONSOLE, type <code>c4a_gui()</code> and press enter.</li>
</ul>
<p>This will open an interactive palette browser where you can check out
different palettes and assess their color-blindness properties. Pick a
palette name and use it in <code>values</code>.</p>
<p>Remember to consider if your data is naturally SEQUENTIAL, DIVERGING,
or CATEGORICAL and to choose accordingly (<a
href="https://www.datawrapper.de/blog/diverging-vs-sequential-color-scales"
class="uri">https://www.datawrapper.de/blog/diverging-vs-sequential-color-scales</a>)</p>
</details>
<div class="small-gap">

</div>
<details>
<summary>
Expand here for a tutorial on tm_scale_intervals
</summary>
<p><strong><code>tm_shape(house_sf)</code></strong> ‚Äì tells R which
spatial dataset you want to plot. It sets up the base layer (in this
case, your points). You must always use <code>tm_shape()</code> before
adding any drawing layer.</p>
<p><strong>Structure tip:</strong> You can stack multiple layers using
more than one <code>tm_shape()</code> block. For example:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="co"># Multiple shapes example with fake data. the first is line data, the second points where we want to color them in by a variable</span></span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a>  <span class="fu">tm_shape</span>(DATASET1) <span class="sc">+</span> </span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a>     <span class="fu">tm_borders</span>() <span class="sc">+</span>  </span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a>  <span class="fu">tm_shape</span>(DATASET2) <span class="sc">+</span> </span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a>      <span class="fu">tm_dots</span>(<span class="at">fill =</span> <span class="st">&quot;Distance.Station&quot;</span>) <span class="sc">+</span></span>
<span id="cb11-6"><a href="#cb11-6" tabindex="-1"></a>  <span class="fu">tm_basemap</span>(<span class="at">server =</span> <span class="st">&quot;CartoDB.Positron&quot;</span>)</span></code></pre></div>
<p>Each <code>tm_shape()</code> refers to a different spatial object
(points, polygons, etc.), and the command that follows it (like
<code>tm_dots()</code> or <code>tm_borders()</code>) tells R how to
visualise that layer. This gives you flexibility to build up your map
one piece at a time.</p>
<p><strong><code>tm_dots(...)</code></strong> ‚Äì adds point symbols to
the map for each feature in <code>house_sf</code>. You can customise how
these look:</p>
<ul>
<li><code>fill = "Distance.Station"</code> ‚Äì the variable used to colour
the points. This must be numeric or categorical.</li>
<li><code>size = 6</code> ‚Äì sets the size of the point symbols. Try
values between 2 and 8 depending on how crowded the map looks.</li>
<li><code>fill.scale = distance_color_scale</code> ‚Äì tells R which
palette and classification system to use. This object should be created
with <code>tm_scale_intervals()</code>.</li>
<li><code>fill.legend = tm_legend("Distance to station (km)")</code> ‚Äì
adds a clear legend title. Use something meaningful with units.</li>
</ul>
<p><strong><code>tm_basemap(server = "CartoDB.VoyagerNoLabels")</code></strong>
‚Äì adds a clean background map for geographic context. This version has
no labels, which is useful if your points are dense or you plan to add
your own labels. Basemaps come from online tile providers and help you
see where your data is located in the world.</p>
<p><strong>Common basemaps you can try:</strong></p>
<ul>
<li><code>"CartoDB.VoyagerNoLabels"</code> ‚Äì light grey map, no labels
(good for layering your own info)</li>
<li><code>"CartoDB.Positron"</code> ‚Äì very light, minimal map (excellent
for visual clarity)</li>
<li><code>"CartoDB.DarkMatter"</code> ‚Äì dark background for contrast
with bright points</li>
<li><code>"Esri.WorldGrayCanvas"</code> ‚Äì Esri‚Äôs clean grayscale map
(useful for presentations)</li>
<li><code>"Esri.WorldImagery"</code> ‚Äì satellite imagery (be careful:
may be visually overwhelming)</li>
</ul>
<p>To use any of these, just change the <code>server</code>
argument:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="fu">tm_basemap</span>(<span class="at">server =</span> <span class="st">&quot;Esri.WorldGrayCanvas&quot;</span>)</span></code></pre></div>
<p>You can leave out the basemap if it distracts from the data or if
you‚Äôre using a local projection.</p>
<p><strong>Common extras you can add to the map:</strong></p>
<ul>
<li><code>tm_compass(position = c("right", "top"))</code> ‚Äì adds a north
arrow.</li>
<li><code>tm_scalebar(position = c("left", "bottom"))</code> ‚Äì adds a
scale bar.</li>
<li><code>tm_layout(frame = FALSE)</code> ‚Äì removes the black frame
around the map.</li>
<li><code>tm_credits("Your Name or Source", position = c("LEFT", "BOTTOM"))</code>
‚Äì adds a small credit or caption.</li>
</ul>
<p>You just add these as lines to the end, linked with a + e.g.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="co"># and plot</span></span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a><span class="fu">tmap_mode</span>(<span class="st">&quot;plot&quot;</span>)</span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a><span class="fu">tm_shape</span>(house_sf) <span class="sc">+</span></span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a>  <span class="fu">tm_dots</span>(</span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a>    <span class="at">fill        =</span> <span class="st">&quot;Distance.Station&quot;</span>,</span>
<span id="cb13-6"><a href="#cb13-6" tabindex="-1"></a>    <span class="at">size        =</span> <span class="dv">6</span>,</span>
<span id="cb13-7"><a href="#cb13-7" tabindex="-1"></a>    <span class="at">fill.scale  =</span> distance_color_scale,</span>
<span id="cb13-8"><a href="#cb13-8" tabindex="-1"></a>    <span class="at">fill.legend  =</span> <span class="fu">tm_legend</span>(<span class="st">&quot;Title?? Units??&quot;</span>)) <span class="sc">+</span></span>
<span id="cb13-9"><a href="#cb13-9" tabindex="-1"></a><span class="fu">tm_basemap</span>(<span class="at">server =</span> <span class="st">&quot;CartoDB.VoyagerNoLabels&quot;</span>)<span class="sc">+</span></span>
<span id="cb13-10"><a href="#cb13-10" tabindex="-1"></a><span class="fu">tm_scalebar</span>(<span class="at">position =</span> <span class="fu">c</span>(<span class="st">&quot;left&quot;</span>, <span class="st">&quot;bottom&quot;</span>))</span></code></pre></div>
</details>
<div class="small-gap">

</div>
<p><br></p>
<p>Here is my example for house price.. (code hidden but all based on
things in the tutorial)</p>
<p><img src="in_GEOG364_Lab3_files/figure-html/unnamed-chunk-15-1.png" width="672" /></p>
<p><br></p>
</div>
</div>
</div>
<div id="week-2-to-come" class="section level2">
<h2>WEEK 2 TO COME‚Ä¶‚Ä¶</h2>
<p>In week 2, you will focus on downloading other new map layers, like
elevation and Open Street Map data, along with some basic statistical
analysis.</p>
<p><br />
</p>
<hr />
<p><br />
</p>
</div>
</div>
<div id="what-to-submit" class="section level1">
<h1>What to submit?</h1>
<p>Nothing yet!</p>
<p><br></p>
<p><br />
</p>
<hr />
<p><br />
</p>
</div>
<div id="grading-rubric" class="section level1">
<h1>Grading rubric</h1>
<div id="overall" class="section level2">
<h2>Overall</h2>
<p>Overall, here is what your lab should correspond to:</p>
<table class=" lightable-classic-2 table table-striped table-hover table-responsive" style="color: black; font-family: &quot;Arial Narrow&quot;, &quot;Source Sans Pro&quot;, sans-serif; margin-left: auto; margin-right: auto; color: black; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
Grade
</th>
<th style="text-align:left;">
% Mark
</th>
<th style="text-align:left;">
Rubric
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
A*
</td>
<td style="text-align:left;">
98-100
</td>
<td style="text-align:left;">
Exceptional. ¬†Not only was it near perfect, but the graders learned
something. ¬†THIS IS HARD TO GET.
</td>
</tr>
<tr>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
96+
</td>
<td style="text-align:left;">
You went above and beyond
</td>
</tr>
<tr>
<td style="text-align:left;">
A
</td>
<td style="text-align:left;">
93+:
</td>
<td style="text-align:left;">
Everything asked for with high quality. ¬† Class example
</td>
</tr>
<tr>
<td style="text-align:left;">
A-
</td>
<td style="text-align:left;">
90+
</td>
<td style="text-align:left;">
The odd minor mistake, All code done but not written up in full
sentences etc. A little less care
</td>
</tr>
<tr>
<td style="text-align:left;">
B+
</td>
<td style="text-align:left;">
87+
</td>
<td style="text-align:left;">
More minor mistakes. ¬†Things like missing units, getting the odd
question wrong, no workings shown
</td>
</tr>
<tr>
<td style="text-align:left;">
B
</td>
<td style="text-align:left;">
83+
</td>
<td style="text-align:left;">
Solid work but the odd larger mistake or missing answer. ¬†Completely
misinterpreted something, that type of thing
</td>
</tr>
<tr>
<td style="text-align:left;">
B-
</td>
<td style="text-align:left;">
80+
</td>
<td style="text-align:left;">
Starting to miss entire/questions sections, or multiple larger mistakes.
Still a solid attempt.¬†
</td>
</tr>
<tr>
<td style="text-align:left;">
C+
</td>
<td style="text-align:left;">
77+
</td>
<td style="text-align:left;">
You made a good effort and did some things well, but there were a lot of
problems. (e.g.¬†you wrote up the text well, but messed up the code)
</td>
</tr>
<tr>
<td style="text-align:left;">
C
</td>
<td style="text-align:left;">
70+
</td>
<td style="text-align:left;">
It‚Äôs clear you tried and learned something. ¬†Just attending labs will
get you this much as we can help you get to this stage
</td>
</tr>
<tr>
<td style="text-align:left;">
D
</td>
<td style="text-align:left;">
60+
</td>
<td style="text-align:left;">
You attempt the lab and submit something. Not clear you put in much
effort or you had real issues
</td>
</tr>
<tr>
<td style="text-align:left;">
F
</td>
<td style="text-align:left;">
0+
</td>
<td style="text-align:left;">
Didn‚Äôt submit, or incredibly limited attempt.¬†
</td>
</tr>
</tbody>
</table>
<p>And.. finished!</p>
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3,h4",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
